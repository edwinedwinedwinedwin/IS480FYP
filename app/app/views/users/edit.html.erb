<%= render "layouts/header" %>
<%= yield %>

<div class="page-main">
  <%= stylesheet_link_tag "style" %>
  <%= stylesheet_link_tag "component" %>
  <%= javascript_include_tag "application"%>

  <div class="page-section">
    <legend class="form-heading heading"> Edit Profile </legend>
    <%= form_for :user,url: user_path(@user),method: :patch do |f| %>
        <% if @user.errors.any? %>
            <div id="error_explanation">
              <ul>
                <% @user.errors.full_messages.each do |msg| %>
                    <li><font color=red><%= msg %></font></li>
                <% end %>
              </ul>
            </div>
        <% end %>

        <div class="form-field">
          <%= f.text_field :first_name, class: "form-input",:readonly=>true%>
          <label class="form-label" for="first-name">First Name</label>
        </div>

        <div class="form-field">
          <%= f.text_field :last_name, class: "form-input",:readonly=>true %>
          <label class="form-label" for="last-name">Last Name</label>
        </div>

        <div class="form-field" align="left">
          <%= f.text_field :email, class: "form-input" %>
          <label class="form-label" for="email">Email</label>
        </div>
              
        <div class="form-field">
            <%= f.file_field :profile_pic, class: "form-input" %>
            <label class="form-label" for="bio_url">Profile Picture</label>                      
        </div>
        <% current_user=User.find(session[:user_id]) %>        
        <% if current_user.profile_pic.present? %> <!-- check if profile pic exists -->
        <% url = current_user.profile_pic%> <!-- get entire url-->
        <% index=url.to_s.rindex('/') %> <!-- get last index of '/'-->
        <div align=center> <%= url.to_s[index+1..url.to_s.length] %> </div>
        <div align=center><%= image_tag(current_user.profile_pic, :size => "150x150",:class=> "img-circular") %></div> 
        <% end %>

        <div class="form-field">
          <%= f.text_field :bio_url, class: "form-input" %>
          <label class="form-label" for="bio_url">Bio Url</label>
        </div>

        <div class="form-field">
          <%= f.text_field :fb_url, class: "form-input" %>
          <label class="form-label" for="fb_url">Facebook</label>
        </div>

        <div class="form-field">
          <%= f.text_field :instagram_url, class: "form-input" %>
          <label class="form-label" for="instagram_url">Instagram</label>
        </div>

        <div class="form-field">
          <%= f.text_field :twitter_url, class: "form-input" %>
          <label class="form-label" for="twitter_url">Twitter</label>
        </div>

        <div class="form-actions">
          <%= f.submit "SUBMIT", class: "button--stroke--long" %>
        </div>
    <% end %>


    <div class="form-actions">
      <%= link_to 'BACK', "../../dashboards/index" %>
    </div>

  </div>
</div>

<%= render "layouts/footer" %>
<