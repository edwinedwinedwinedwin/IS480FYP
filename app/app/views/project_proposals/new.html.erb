<% if @session.nil? %>
<%= render "layouts/headerLogin" %>
    <%= yield %>
<% else %>
    <%= render "layouts/headerUser", :projects=>@projects, :images =>  @project_coverImgs%>
<% end %>
<%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>

<main class="page-main">
  <%= form_for :project_proposal, url: createProposal_path,:html => { :multipart => true } do |f| %>
  <div class="form-field">
          <% if @ProjectProposal.errors.any? %>
              <div class="panel panel-danger">
              <div class="panel-heading"><h2><strong>Your inputs do not meet the requirements:</strong></h2></div>
                <div class="panel-body alert-design">
                  <ul style="list-style-type:circle">
                    <% @ProjectProposal.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                    <% end %>
                  </ul>
                </div>
              </div>
          <% end %>
        </div>        
    <!--Project title & Category Section-->
  <section class="page-section--small">
    <div class="form--large nl-form" id="nl-form">
      <fieldset>
        <div class="form-field">
          <p>My project title is</p>
          <%= f.text_field :title, class: "form-input" %>
        </div>

        <div class="form-field">
          <p>It will impact the</p>
            <% options = options_from_collection_for_select(ProjectCategory.all, 'id', 'category', '5') %>
            <%= f.select :project_category_id, options, :class=>"form-input" %>
          <span>category.</span>
        </div>
      </fieldset>

      <div class="form-progress">
        <div class="grid-container wrap">
          <div class="grid-65 form-progress-information">
            <span class="form-progress__title">Project Proposal</span>
            <span class="form-progress__section">1 / 3</span>
            <span class="form-progress__description">Basic Info</span>
          </div>
        </div>
      </div>

      
      <br/>
      <fieldset>
        <div class="form-field">
          <p>Tell us about your project:</p>
<%= f.text_area(:description, rows: "8", :class=>"form-input form-textarea",:placeholder=>"Enter your description", :id=>"project-description", :maxlength=>"1000") %>
          <div class="textarea-character-limit js-textarea-limit" data-for="project-description" data-limit="1000"><span class="textarea-character-limit__count">1000</span> characters left</div>

          <div class="form-file-dropper-getstarted js-file-dropper">
            <i class="icon icon--paperclip"></i>
            To add feature image(s),<br> click on the 'Choose Files' button <!--/ video files -->
            <div class="form-field-getstarted">
                <%= f.file_field :img_url,:multiple=>true, :class=>"form-input--getstarted"  %>
                <label class="form-label" for="img_url">(Image File Size: < 2MB)</label>
            </div>
          </div>
         </div>
      </fieldset>

      <div class="form-progress">
        <div class="grid-container wrap">
          <div class="grid-65 form-progress-information">
            <span class="form-progress__title">Project Proposal</span>
            <span class="form-progress__section">2 / 3</span>
            <span class="form-progress__description">Project Description</span>
          </div>
        </div>
      </div>

      <!-- Personal contact information -->
      <br/>
      <fieldset>
      <p>We'll contact you soon :)</p>
        <div class="form-field">
          <% if @session.nil? %>
        <%= f.text_field(:name, rows: "1", columns: "1", :class=>"form-input form-textarea",:placeholder=>"Name") %> 
        <%= f.text_field(:email, rows: "1", :class=>"form-input form-textarea",:placeholder=>"Email") %>
        <br/>

        <p>Location:</p>
        <i class="icon icon--location-pin"></i>
        <%= f.country_select :country, ['Singapore'], options = {}, html_options = {:class => "form-input", :id => "resizing_select"} %>
        <select id="width_tmp_select">
          <option id="width_tmp_option"></option>
        </select>
        <% else %>
              <%= f.text_field(:name, rows: "1", columns: "1", :class=>"form-input form-textarea", :value => @user.name) %>              
              <%= f.text_field(:email, rows: "1", :class=>"form-input form-textarea",:value => @user.email) %>
              <br/>

              <p>Location:</p>
              <i class="icon icon--location-pin"></i>
              <%= f.country_select :country, [@user.country], options = {}, html_options = {:class => "form-input", :id => "resizing_select"} %>
              <select id="width_tmp_select">
                <option id="width_tmp_option"></option>
              </select>

          <%end %>
      </div>

        



      <div class="form-progress">
        <div class="grid-container wrap">
          <div class="grid-65 form-progress-information">
            <span class="form-progress__title">Project Proposal</span>
            <span class="form-progress__section">3 / 3</span>
            <span class="form-progress__description">Contact Details</span>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <%= f.submit "Submit Project Proposal", class: "button--fill--black button--full" %>
      </div>
      </fieldset>
    </div>
  </section>
        <% end %>

</main>
<%= render "layouts/footer" %>
<%= yield %>